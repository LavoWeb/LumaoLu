<!doctype html><html lang=fr-lu><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Configurer OpenVPN avec Docker</title><meta name=description content><meta name=robots content="INDEX,FOLLOW"><link rel=apple-touch-icon sizes=180x180 href=https://lu.lumao.eu/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://lu.lumao.eu/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://lu.lumao.eu/favicon-16x16.png><link rel=manifest href=https://lu.lumao.eu/site.webmanifest><link rel=mask-icon href=https://lu.lumao.eu/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#da532c"><link rel=alternate hreflang=fr-fr href=https://lumao.eu/post/openvpn-docker/><link rel=alternate hreflang=x-default href=https://lumao.eu/post/openvpn-docker/><link rel=alternate hreflang=fr-ch href=https://lumao.ch/post/openvpn-docker/><link rel=alternate hreflang=fr-be href=https://be.lumao.eu/post/openvpn-docker/><link rel=alternate hreflang=fr-lu href=https://lu.lumao.eu/post/openvpn-docker/><meta name=generator content="Hugo 0.56.0-DEV"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PXRXBBS');</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PXRXBBS" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header class=header><div class=container><div class=row><div class=col-sm-3><a class="animsition-link site-logo" href=https://lu.lumao.eu/><img src=https://lu.lumao.eu/agence_magento.svg alt="Lumao - Développement Magento"></a></div><div class=col-sm-9><nav id=site-nav class=nav-toggle><ul class=menu><li><a href=https://lu.lumao.eu/><i class="fa fa-code" aria-hidden=true></i>Magento</a><li><a href=https://lu.lumao.eu/post/developpement-akeneo/><i class="fa fa-codepen" aria-hidden=true></i>Akeneo</a><li><a href=https://lu.lumao.eu/post/developpement-laravel/><i class="fa fa-connectdevelop" aria-hidden=true></i>Laravel</a><li><a href=https://lu.lumao.eu/post/contact/><i class="fa fa-comments" aria-hidden=true></i>Contact</a></ul></nav></div></div></div></header><div class="section section-content" id=section-content><div class=title-block><h1 class=title-big>Configurer OpenVPN avec Docker</h1></div><div class=container><div class=row><div class="col-md-12 about-info"><p>Un article très court aujourd&rsquo;hui pour monter un VPN sur un serveur avec docker-compose en quelques minutes.<h2 id=serveur-openvpn>Serveur OpenVPN</h2><p>Très simple, on crée un répertoire <em>openvpn</em> et on met le fichier <em>docker-compose.yml</em> :<pre><code>openvpn:
  image: 'kylemanna/openvpn'
  volumes:
    - './data:/etc/openvpn'
  ports:
    - &quot;1194:1194/udp&quot;
  cap_add:
    - NET_ADMIN
  restart: always
</code></pre><p>On fait la configuration :<pre><code>docker run --name openvpn_openvpn_1 -v /etc/openvpn busybox
docker run --volumes-from openvpn_openvpn_1 --rm kylemanna/openvpn ovpn_genconfig -u udp://VPN.SERVERNAME.COM
docker run --volumes-from openvpn_openvpn_1 --rm -it kylemanna/openvpn ovpn_initpki
</code></pre><p>On crée un utilisateur :<pre><code>docker run --volumes-from openvpn_openvpn_1 --rm -it kylemanna/openvpn easyrsa build-client-full client-bureau nopass
docker run --volumes-from openvpn_openvpn_1 --rm kylemanna/openvpn ovpn_getclient client-bureau &gt; client-bureau.ovpn
</code></pre><p>On télécharge cette clé sur notre client<h2 id=client-openvpn>Client OpenVPN</h2><p>On va intégrer le VPN dans les paramètres de réseau pour pouvoir l&rsquo;activer/désactiver facilement.<pre><code>sudo apt-get install network-manager-openvpn network-manager-openvpn-gnome
</code></pre><p>On va dans les paramètres réseaux et on clic sur le +.<p><img src=/images/14/1-ajouter-vpn.png alt="Ajouter un VPN gnome"><p>On choisit l&rsquo;import, on mets le fichier précédemment téléchargé.<p><img src=/images/14/2-modifier-information.png alt="Modifier les informations du VPN gnome"><p>Activer le VPN gnome<p><img src=/images/14/3-vpn-desactive.png alt="Activer le VPN gnome"><p>Désactiver le VPN gnome<p><img src=/images/14/4-vpn-active.png alt="Désactiver le VPN gnome"><h2 id=merci>Merci</h2><p><a href=https://memo-linux.com/un-serveur-openvpn-en-moins-de-5-minutes-avec-docker/>https://memo-linux.com/un-serveur-openvpn-en-moins-de-5-minutes-avec-docker/</a></div></div></div></div><footer class=footer-bottom><p class=copyright>&copy; 2019 Lumao SASU <img src=https://lu.lumao.eu/favicon-32x32.png alt="agence web Lumao" class=copyright__logo> - 835 305 657 R.C.S. Annecy - Développé avec <i class="fa fa-heart-o"></i>par LavoWeb -<p class=copyright>Nous nous déplaçons sur Luxembourg, Esch-alzette, Dudelange, Schifflange<p class=copyright>Le nom "Magento", "Magento 2" et le logo sont des marques commerciales de Magento, Inc.</footer><link rel=stylesheet href=https://lu.lumao.eu/dist/all.css><script src=https://lu.lumao.eu/dist/all.js></script><script>jQuery(document).ready(function(){jQuery('img').each(function(){jQuery(this).addClass('img-responsive');});jQuery('h2').each(function(){jQuery(this).addClass('title-middle');});});window.addEventListener('DOMContentLoaded',function(){var myLazyLoad=new LazyLoad({elements_selector:".lazy"});var myLazyLoadWebp=new LazyLoad({elements_selector:".lazy-webp",to_webp:true});},false);</script><script id=ze-snippet src="https://static.zdassets.com/ekr/snippet.js?key=5834f365-e0f5-4aed-929d-fd5bce2c17f7"></script>